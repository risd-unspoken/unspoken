<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>RISD Unspoken</title>
  <meta name="description" content="RISD Unspoken messages">
  <link href="./favicon.png" rel="shortcut icon">

  <link rel="stylesheet" href="style.css">
  <script src="https://unpkg.com/prefixfree@1.0.0/prefixfree.min.js"></script>

  <script src="https://wzrd.in/standalone/formdata-polyfill@latest"></script>
  <script src="https://wzrd.in/standalone/promise-polyfill@latest"></script>
  <script src="https://wzrd.in/standalone/whatwg-fetch@latest"></script>
</head>
<body>

<div class="title-page">
  <h1 class="title">Unspoken</h1>
</div>
<div class="intro-page">


  <div class="intro">
	 <p>People will probably have at least one place that they enjoyed during college years or going miss when they leave college. For example, your freshmen dorm, when you first arrived here or studio, where you had to suffer because of projects.</p>
   
    <p> Unspoken is for graduating seniors  to leave a message that they experienced within the four years. This project is intended to share memories and experiences within the RISD community before the graduation. Join the RISD Unspoken community and find out what others have shared.</p> 

    <p>If you want to leave any message behind, please scroll below. 
    </p>

</div>
</div>
  
  
<!--form-->
  <div class="window">
   <div>
    <p class="explanation"> Leave your memories behind.</p>
  <div class="bubble">

    
  <div class="form-container">
  <form name="submit-to-google-sheet"> 
  
  <p >Where is your memorable place?<br>
  </p>
  <textarea name="place" type="text"></textarea>

  <p>Why?</p>
  <textarea name="story" type="text"> </textarea>
    
  <button type="submit" id="submit">submit</button> 
  
  <p class="confirmation">Information will kept anonymous and unknown.</p>
  </form>
  <div class="loading js-loading is-hidden">
      <div class="loading-spinner">
        <svg><circle cx="25" cy="25" r="20" fill="none" stroke-width="2" stroke-miterlimit="10"/></svg>
      </div>
    </div>
    
    <p class="js-success-message is-hidden">Thank you for your submission. <br><br>
    To see what others have posted, check out any qr-code around and scan to read.</p>
    <p class="js-error-message is-hidden">Error, Please try again</p>
</div>
  </div>
  </div>
</div>




<!--  <a href="https://docs.google.com/spreadsheets/d/1-KzY1rljP95rcLSbzm4uoxU43ZH2i1aLaRg_nVxT_sE/edit#gid=0" target="_blank">View the Google Sheet</a>-->
  
  <script>
    const scriptURL = 'https://script.google.com/macros/s/AKfycbzIMXyuL5sy2tppJFRWSkQDcU78zJmcHmfEw04jYiRHzKMQd8Fj/exec'
    const form = document.forms['submit-to-google-sheet']
    const loading = document.querySelector('.js-loading')
    const successMessage = document.querySelector('.js-success-message')
    const errorMessage = document.querySelector('.js-error-message')

    form.addEventListener('submit', e => {
      e.preventDefault()
      showLoadingIndicator()
      fetch(scriptURL, { method: 'POST', body: new FormData(form)})
        .then(response => showSuccessMessage(response))
        .catch(error => showErrorMessage(error))
    })

    function showLoadingIndicator () {
      form.classList.add('is-hidden')
      loading.classList.remove('is-hidden')
    }

    function showSuccessMessage (response) {
      console.log('Success!', response)
      setTimeout(() => {
        successMessage.classList.remove('is-hidden')
        loading.classList.add('is-hidden')
      }, 500)
    }

    function showErrorMessage (error) {
      console.error('Error!', error.message)
      setTimeout(() => {
        errorMessage.classList.remove('is-hidden')
        loading.classList.add('is-hidden')
      }, 500)
    }
  </script>


</body>
</html>
